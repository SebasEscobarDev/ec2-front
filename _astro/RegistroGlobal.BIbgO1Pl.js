import{j as e}from"./jsx-runtime.K1e75nIr.js";import{b as j,a as L}from"./bg-white.CDTeDQmM.js";import{s as U}from"./logo.DFUuHF2-.js";import{H as E,C as M}from"./CardPerfilHorizontal.MO_Ww-IS.js";import{g as f,a as T,C as d,o as z}from"./consts.DOBrpr6r.js";import{u as b,G as B}from"./GlobalContext.BGopxYj3.js";import{r as l}from"./index.NEDEFKed.js";import{C as N}from"./index.D7_7wx8r.js";import{S as Y,s as G,a as H,b as R,c as g}from"./swalert.dlfXll0x.js";import{M as q}from"./ModalSettings.Djvc6zLs.js";/* empty css                       */import"./notifies.CM1SUXiu.js";/* empty css                       */import"./sweetalert2.all.Bo_iXOkr.js";import"./_commonjsHelpers.BosuxZz1.js";import"./users.BeCaaZxL.js";const v=`${T}/couples`,O=async s=>{try{return await N.get({url:`${v}/user/${s}`,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+f("AuthToken")}})}catch(r){console.log(r)}},W=async s=>{try{return await N.request({method:"POST",url:`${v}/form`,headers:{Accept:"application/json","Content-Type":"multipart/form-data",Authorization:"Bearer "+f("AuthToken")},data:s})}catch(r){console.log(r)}},w=l.createContext(),J=({children:s})=>{const r={txtFullName:"",txtDia:"",txtMes:"",txtAnio:"",slcIdentify:"",txtFoto:"",acerca:"",user_id:""},[p,x]=l.useState(r),[i,m]=l.useState(null),[u,c]=l.useState(null);return e.jsx(w.Provider,{value:{form:p,setForm:x,file:i,setFile:m,previewUrl:u,setPreviewUrl:c},children:s})},K=()=>l.useContext(w),Z=()=>{const{form:s,setForm:r,file:p,setFile:x,previewUrl:i,setPreviewUrl:m}=K(),u=l.useRef(null),c=()=>{u.current.click()},h=a=>{const t=a.target.files[0];if(t&&t.type.startsWith("image/")){x(t);const n=URL.createObjectURL(t);m(n)}else alert("Please select a valid image file"),x(null),m(null)},[y,C]=l.useState(""),[F,k]=l.useState(""),[A,S]=l.useState(""),I=a=>{const t=a.target.value;/^\d*$/.test(t)&&(t===""||parseInt(t)>=1&&parseInt(t)<=31)&&(C(t),r({...s,txtDia:t}))},D=a=>{const t=a.target.value;/^\d*$/.test(t)&&(t===""||parseInt(t)>=1&&parseInt(t)<=12)&&(k(t),r({...s,txtMes:t}))},_=a=>{const t=a.target.value;if(/^\d*$/.test(t)){S(t);const n=new Date().getFullYear(),o=n-70,P=n-18;t!==""&&(parseInt(t)<o||parseInt(t)>P)?r({...s,txtAnio:""}):r({...s,txtAnio:t})}},$=async()=>{if(console.log("form :"),console.log(s),!p){alert("Please select a file first");return}const a=new FormData;if(a.append("image",p),!s.txtFullName||!s.txtDia||!s.txtMes||!s.txtAnio||!s.slcIdentify||!i)return g("error","Error!","Debe diligenciar todos los campos para continuar");const t=JSON.parse(f("User"));let n;const o={nombre:s.txtFullName,nacimiento_dia:s.txtDia,nacimiento_mes:s.txtMes,nacimiento_ano:s.txtAnio,genero_identifica:s.slcIdentify,foto:i,acerca:"",user_id:t.id};console.log(o),a.append("id",o.id),a.append("nombre",o.nombre),a.append("nacimiento_dia",o.nacimiento_dia),a.append("nacimiento_mes",o.nacimiento_mes),a.append("nacimiento_ano",o.nacimiento_ano),a.append("genero_identifica",o.genero_identifica),a.append("foto",""),a.append("acerca",o.acerca),a.append("user_id",o.user_id),n=await W(a),console.log(n),n.status>=200&&n.status<=400?g("success","Exito!","Pareja registrada correctamente!"):(console.log(n),g("error","Error!","Ha ocurrido un error inesperado!"))};return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h2",{className:"pt-4 md:pt-0 pl-4 md:pl-0 text-left mb-4 text-xl pop-regular",children:"Añadir datos de pareja"}),e.jsx("div",{className:"w-full md:w-[500px] bg-[#D84066] md:rounded-[25px] p-3 md:border border-white",children:e.jsxs("div",{className:"my-4 flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"txtFullName",className:`${d.label}`,children:"Nombre completo"}),e.jsx("div",{className:"flex mb-2",children:e.jsx("input",{className:`${d.inputTwo}`,type:"text",name:"txtFullName",placeholder:"Ingresa tu nombre Completo",pattern:"[a-zA-Z]+",minLength:"5",maxLength:"260",value:s.txtFullName,onChange:a=>r({...s,txtFullName:a.target.value}),required:!0})}),e.jsx("label",{htmlFor:"txtDia",className:`${d.label}`,children:"Fecha de nacimiento"}),e.jsx("div",{className:"flex mb-2",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"special-select mr-2",children:e.jsx("input",{className:`${d.inputTwo}`,type:"text",name:"txtDia",placeholder:"Día",minLength:"1",maxLength:"2",min:"1",max:"31",value:y,onChange:I,required:!0})}),e.jsx("div",{className:"special-select mr-2",children:e.jsx("input",{className:`${d.inputTwo}`,type:"text",name:"txtMes",placeholder:"Mes",minLength:"1",maxLength:"2",min:"1",max:"12",value:F,onChange:D,required:!0})}),e.jsx("div",{className:"special-select",children:e.jsx("input",{className:`${d.inputTwo}`,type:"text",name:"txtAnio",placeholder:"Año",maxLength:"4",value:A,onChange:_,required:!0})})]})}),e.jsx("label",{htmlFor:"slcIdentify",className:`${d.label}`,children:"Genero"}),e.jsx("div",{className:"flex mb-2 z-40",children:e.jsx(Y,{id:"slcIdentify",options:z,form:s,setForm:r})}),e.jsx("label",{className:`${d.label}`,children:"Foto de los ojos"}),e.jsxs("div",{className:"hidden md:flex flex-col md:flex-row",children:[e.jsx("button",{onClick:c,title:"Subir Foto",type:"button",className:"flex bg-white w-full cursor-pointer md:w-2/4 border align-center items-center justify-center border-black rounded-[25px] md:mr-2 mb-4 md:mb-0",children:e.jsx("div",{className:"relative p-4",children:e.jsx("img",{className:"relative",id:"imgFotoOjos",src:i??G.src,width:245,height:143,alt:"Subir imagen"})})}),e.jsx("input",{ref:u,className:"hidden",type:"file",name:"inputFoto",accept:"image/*",onChange:h}),e.jsx("div",{className:"flex bg-white w-full md:w-2/4 flex-col justify-center border border-black rounded-[25px] md:ml-2",children:e.jsx("div",{className:"flex justify-center items-center h-[160px] overflow-hidden mb-2",children:e.jsx("img",{className:"w-[200px]",src:H.src,alt:"Demostracion de foto"})})})]}),e.jsx("div",{className:"flex mt-2",children:e.jsxs("button",{onClick:c,className:"bg-white border border-black w-full justify-between rounded-xl flex items-center px-4 h-[58px] mr-2",children:[e.jsxs("label",{className:"w-full text-black pop-bold",children:[i?"Cambiar":"Cargar"," Foto"]}),e.jsx("img",{src:R.src,className:"mr-2",width:30,alt:"Upload"})]})}),e.jsxs("div",{className:"flex justify-center mt-4",children:[e.jsx("button",{className:"bg-transparent cursor-pointer border border-black w-[160px] justify-center rounded-[25px] flex items-center px-4 py-2 mr-2",children:e.jsx("label",{className:" text-black pop-bold cursor-pointer",children:" Cancelar"})}),e.jsx("button",{onClick:$,className:"ml-4 bg-black cursor-pointer border border-black w-[160px] justify-center rounded-[25px] flex items-center px-4 py-2 mr-2",children:e.jsx("label",{className:"text-white pop-bold cursor-pointer",children:" Aceptar"})})]})]})})]})},Q=()=>{const{refHeaderButtonsNull:s}=b();l.useEffect(()=>{const c=f("AuthToken"),h=f("User");c!=null&&h!=null||(window.location.href="/")},[]);const{mode:r}=b(),[p,x]=l.useState(j.src);l.useEffect(()=>{x(r==="dark"?j.src:L.src)},[r]);const{userLogin:i}=b(),[m,u]=l.useState(!1);return l.useEffect(()=>{(async()=>{if(i.id===void 0)return;const c=await O(i.id);c.data&&c.data[0]?.id&&u(!0)})()},[]),e.jsxs("div",{style:{backgroundColor:"white",backgroundImage:`url(${p})`},className:"flex flex-col w-full min-h-screen md:p-10 text-center bg-contain",children:[e.jsx(E,{id:"headerButtonsBlob",back:!1,refBtn:s}),e.jsxs("div",{className:"w-full flex flex-col md:flex-row items-center",children:[e.jsx("div",{className:"w-full md:w-[500px] flex flex-col z-10 pt-[1px]",children:e.jsx(M,{btnChat:!1,btnNotify:!1,maxw:!1})}),e.jsx("div",{className:"w-full hidden md:flex z-10 gap-4 px-4 md:px-40 pl-2 flex-col",children:e.jsx("div",{className:"w-full flex items-center justify-center mb-[-5px] mt-[-103px]",children:e.jsx("div",{className:"relative inline-block overflow-hidden",children:e.jsx("img",{src:U.src,width:150,alt:"Logo Kimik",className:"mb-[-50px]"})})})})]}),e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex flex-col xl:flex-row w-full justify-center gap-10 lg:px-[10%]",children:[!m&&e.jsx(Z,{}),m&&e.jsx("h1",{className:"text-2xl text-white pop-semi",children:"Ya tienes una pareja registrada!"})]})})]})},ue=()=>e.jsxs(B,{children:[e.jsx(q,{}),e.jsx(J,{children:e.jsx(Q,{})})]});export{ue as default};
