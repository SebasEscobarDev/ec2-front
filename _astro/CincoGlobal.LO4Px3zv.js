import{j as e,C as v}from"./js.cookie.6G8tq96H.js";import{W as E}from"./Website.BbZBp6VC.js";import{r as i}from"./index.NEDEFKed.js";import{C as K,a as C,p as S,b as L,c as R}from"./kimikia.B5WuR9D4.js";import"./logo2.D5m5TY_C.js";import"./index.D7_7wx8r.js";import"./astro/assets-service.BTYAIIqN.js";const _={src:"/_astro/asistente.DKfAEZz2.png",width:52,height:52,format:"png"},O=()=>{const c=i.useRef(null),y=t=>{t.key==="Enter"&&j()},d={id:"web"},p=i.useRef(null),[x,g]=i.useState([{message:"Hola, soy Kimik, tu asistente virtual. ¿En qué puedo ayudarte hoy?",type:"received"}]),[h,b]=i.useState(""),[k,w]=i.useState(!1);i.useEffect(()=>{f()},[x]);const f=()=>{p.current.scrollTop=p.current.scrollHeight},M=(t,r,o)=>({from_user_id:t,to_user_id:r,message:o,creado_el:new Date().toISOString(),like:!1}),u=async(t,r,o)=>{const s=M(t,r,o);return g(a=>[...a,{...s,type:s.from_user_id===d.id?"sent":"received"}]),setTimeout(()=>{f()},100),w(!1),b(""),s},j=async()=>{if(c.current.value==="")return c.current.focus();const t=c.current.value;c.current.value="";try{const s=d.id;u(s,"KimikChat",t)}catch(s){console.log(s)}const r="KimikChat",o=d.id;try{const s=await S(t,async l=>{if(!l||l.indexOf("DONE")>-1)return;w(!0);const n=await L(l);return await b(m=>m+n),f(),n}).then(l=>{const n=R(l);let m="";return n[0].indexOf("Error")>-1?m=n[0]:m=n.filter(N=>N!==void 0).join(""),m}).catch(l=>{console.log("Error:",l),u(r,o,"Error: No hay conexion con el LLM.")});let a="";s===""?a="Error: No hay conexion con el LLM.":a=s,u(r,o,a)}catch{u(r,o,"Error al comunicarse con el LLM:")}};return e.jsxs("div",{id:"section-cinco",className:"flex pl-40 pb-10 gap-10 w-full",children:[e.jsx("div",{className:"w-[250px]",children:e.jsxs("div",{className:`${v.bgSecondary} flex justify-center items-center gap-4 p-5 rounded-[25px]`,children:[e.jsx("img",{src:_.src,alt:""}),e.jsx("h1",{className:"text-2xl pop-semi text-white",children:"kimik"})]})}),e.jsxs("div",{className:"md:flex flex-col rigth-side w-full pl-2 transition-all",children:[e.jsx("header",{className:`${v.bgSecondary} flex items-center justify-between px-5 h-[80px] rounded-t-3xl border border-[#7c69ba] w-full`}),e.jsx("div",{className:"bg-white relative flex flex-col overflow-hidden h-[90%] items-center w-full rounded-b-3xl",children:e.jsxs("div",{ref:p,className:"flex flex-col pl-4 pr-4 mb-20 overflow-y-scroll max-h-[71vh] h-[100%] items-center border border-[#7c69ba] border-t-0 w-full pt-4",children:[e.jsx(K,{messages:x,setMessages:g,userLogin:d}),k===!0&&h!=""&&e.jsx("div",{className:"flex flex-col w-full items-start",children:e.jsx(C,{type:"received",message:h,like:!1,userLogin:d,bgMessage:"bg-[#7c69ba]"})}),e.jsx("footer",{className:"absolute flex bottom-0 left-0 pb-5 pt-5 pl-5 pr-5 bg-white w-full rounded-b-3xl border-b border-l border-r border-[#7c69ba]",children:e.jsxs("div",{className:"group w-full relative",children:[e.jsx("input",{ref:c,onKeyDown:y,className:"focus:ring-2 bg-black focus:ring-yellow-400 focus:outline-none appearance-none w-full text-sm leading-6 text-slate-300 placeholder-slate-300 rounded-2xl py-2 pt-3 pl-4 pr-11 ring-1 ring-slate-200 shadow-sm",type:"text","aria-label":"Enviar Mensaje...",placeholder:"Enviar Mensaje..."}),e.jsx("button",{onClick:j,type:"button",className:"absolute right-1 top-0 px-2 py-2",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",className:"bi bi-send rotate-45",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576zm6.787-8.201L1.591 6.602l4.339 2.76z"})})})]})})]})})]})]})},Z=()=>e.jsx(E,{children:e.jsx(O,{})});export{Z as default};
