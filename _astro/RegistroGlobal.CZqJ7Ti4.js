import{j as e}from"./jsx-runtime.7faW4zRM.js";import{b as v,a as T}from"./bg-white.CDTeDQmM.js";import{s as B}from"./logo.DFUuHF2-.js";import{H as M,C as z}from"./CardPerfilHorizontal.8nyT72gp.js";import{g as h,u as Y,c as o,C as m}from"./consts.DMbWGtjg.js";import{u as b,G}from"./GlobalContext.CWxZjuqU.js";import{r as n}from"./index.DhYZZe0J.js";import{C as w}from"./index.D7_7wx8r.js";import{u as R,S as q,s as H,a as O,b as W,c as j,F as J}from"./swalert.HWhFunnq.js";import{M as K}from"./ModalSettings.CpEgxeR7.js";/* empty css                       */import"./notifies.ClIANF-T.js";/* empty css                       */import"./sweetalert2.esm.all.BGf-Fe8G.js";import"./users.Ddh_RhM8.js";const F=`${Y}/couples`,Z=async s=>{try{return await w.get({url:`${F}/user/${s}`,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+h("AuthToken")}})}catch(r){console.log(r)}},Q=async s=>{try{return await w.request({method:"POST",url:`${F}/form`,headers:{Accept:"application/json","Content-Type":"multipart/form-data",Authorization:"Bearer "+h("AuthToken")},data:s})}catch(r){console.log(r)}},y=n.createContext(),V=({children:s})=>{const r={txtFullName:"",txtDia:"",txtMes:"",txtAnio:"",slcIdentify:"",txtFoto:"",acerca:"",user_id:""},[p,u]=n.useState(r),[d,x]=n.useState(null),[f,a]=n.useState(null);return e.jsx(y.Provider,{value:{form:p,setForm:u,file:d,setFile:x,previewUrl:f,setPreviewUrl:a},children:s})},X=()=>n.useContext(y),ee=()=>{const{form:s,setForm:r,file:p,setFile:u,previewUrl:d,setPreviewUrl:x}=X(),{optionsGender:f}=R(),{languageText:a}=b(),g=n.useRef(null),N=()=>{g.current.click()},C=l=>{const t=l.target.files[0];if(t&&t.type.startsWith("image/")){u(t);const c=URL.createObjectURL(t);x(c)}else alert("Please select a valid image file"),u(null),x(null)},[k,S]=n.useState(""),[D,A]=n.useState(""),[I,_]=n.useState(""),$=l=>{const t=l.target.value;/^\d*$/.test(t)&&(t===""||parseInt(t)>=1&&parseInt(t)<=31)&&(S(t),r({...s,txtDia:t}))},P=l=>{const t=l.target.value;/^\d*$/.test(t)&&(t===""||parseInt(t)>=1&&parseInt(t)<=12)&&(A(t),r({...s,txtMes:t}))},L=l=>{const t=l.target.value;if(/^\d*$/.test(t)){_(t);const c=new Date().getFullYear(),i=c-70,E=c-18;t!==""&&(parseInt(t)<i||parseInt(t)>E)?r({...s,txtAnio:""}):r({...s,txtAnio:t})}},U=async()=>{if(console.log("form :"),console.log(s),!p){alert("Please select a file first");return}const l=new FormData;if(l.append("image",p),!s.txtFullName||!s.txtDia||!s.txtMes||!s.txtAnio||!s.slcIdentify||!d)return j("error","Error!",o.txtFormDos12[a]);const t=JSON.parse(h("User"));let c;const i={nombre:s.txtFullName,nacimiento_dia:s.txtDia,nacimiento_mes:s.txtMes,nacimiento_ano:s.txtAnio,genero_identifica:s.slcIdentify,foto:d,acerca:"",user_id:t.id};console.log(i),l.append("id",i.id),l.append("nombre",i.nombre),l.append("nacimiento_dia",i.nacimiento_dia),l.append("nacimiento_mes",i.nacimiento_mes),l.append("nacimiento_ano",i.nacimiento_ano),l.append("genero_identifica",i.genero_identifica),l.append("foto",""),l.append("acerca",i.acerca),l.append("user_id",i.user_id),c=await Q(l),console.log(c),c.status>=200&&c.status<=400?j("success","Exito!",o.txtCouples1[a]):(console.log(c),j("error","Error!",o.txtFormSiete1[a]))};return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h2",{className:"pt-4 md:pt-0 pl-4 md:pl-0 text-left mb-4 text-xl pop-regular",children:o.txtCouples2[a]}),e.jsx("div",{className:"w-full md:w-[500px] bg-[#D84066] md:rounded-[25px] p-3 md:border border-white",children:e.jsxs("div",{className:"my-4 flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"txtFullName",className:`${m.label}`,children:o.txtFormDos2[a]}),e.jsx("div",{className:"flex mb-2",children:e.jsx("input",{className:`${m.inputTwo}`,type:"text",name:"txtFullName",placeholder:o.txtFormDos3[a],pattern:"[a-zA-Z]+",minLength:"5",maxLength:"260",value:s.txtFullName,onChange:l=>r({...s,txtFullName:l.target.value}),required:!0})}),e.jsx("label",{htmlFor:"txtDia",className:`${m.label}`,children:o.txtFormDos4[a]}),e.jsx("div",{className:"flex mb-2",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"special-select mr-2",children:e.jsx("input",{className:`${m.inputTwo}`,type:"text",name:"txtDia",placeholder:o.txtFormDos5[a],minLength:"1",maxLength:"2",min:"1",max:"31",value:k,onChange:$,required:!0})}),e.jsx("div",{className:"special-select mr-2",children:e.jsx("input",{className:`${m.inputTwo}`,type:"text",name:"txtMes",placeholder:o.txtFormDos6[a],minLength:"1",maxLength:"2",min:"1",max:"12",value:D,onChange:P,required:!0})}),e.jsx("div",{className:"special-select",children:e.jsx("input",{className:`${m.inputTwo}`,type:"text",name:"txtAnio",placeholder:o.txtFormDos7[a],maxLength:"4",value:I,onChange:L,required:!0})})]})}),e.jsx("label",{htmlFor:"slcIdentify",className:`${m.label}`,children:o.txtGenero[a]}),e.jsx("div",{className:"flex mb-2 z-40",children:e.jsx(q,{id:"slcIdentify",options:f[a],form:s,setForm:r})}),e.jsx("label",{className:`${m.label}`,children:o.txtFormCuatro1[a]}),e.jsxs("div",{className:"hidden md:flex flex-col md:flex-row",children:[e.jsx("button",{onClick:N,title:"Subir Foto",type:"button",className:"flex bg-white w-full cursor-pointer md:w-2/4 border align-center items-center justify-center border-black rounded-[25px] md:mr-2 mb-4 md:mb-0",children:e.jsx("div",{className:"relative p-4",children:e.jsx("img",{className:"relative",id:"imgFotoOjos",src:d??H.src,width:245,height:143,alt:"Subir imagen"})})}),e.jsx("input",{ref:g,className:"hidden",type:"file",name:"inputFoto",accept:"image/*",onChange:C}),e.jsx("div",{className:"flex bg-white w-full md:w-2/4 flex-col justify-center border border-black rounded-[25px] md:ml-2",children:e.jsx("div",{className:"flex justify-center items-center h-[160px] overflow-hidden mb-2",children:e.jsx("img",{className:"w-[200px]",src:O.src,alt:"Demostracion de foto"})})})]}),e.jsx("div",{className:"flex mt-2",children:e.jsxs("button",{onClick:N,className:"bg-white border border-black w-full justify-between rounded-xl flex items-center px-4 h-[58px] mr-2",children:[e.jsxs("label",{className:"w-full text-black pop-bold",children:[d?"Cambiar":"Cargar"," Foto"]}),e.jsx("img",{src:W.src,className:"mr-2",width:30,alt:"Upload"})]})}),e.jsxs("div",{className:"flex justify-center mt-4",children:[e.jsx("button",{className:"bg-transparent cursor-pointer border border-black w-[160px] justify-center rounded-[25px] flex items-center px-4 py-2 mr-2",children:e.jsxs("label",{className:" text-black pop-bold cursor-pointer",children:[" ",o.txtBtnCancel[a]]})}),e.jsx("button",{onClick:U,className:"ml-4 bg-black cursor-pointer border border-black w-[160px] justify-center rounded-[25px] flex items-center px-4 py-2 mr-2",children:e.jsxs("label",{className:"text-white pop-bold cursor-pointer",children:[" ",o.txtBtnAccept[a]]})})]})]})})]})},te=()=>{const{refHeaderButtonsNull:s}=b();n.useEffect(()=>{const a=h("AuthToken"),g=h("User");a!=null&&g!=null||(window.location.href="/")},[]);const{mode:r}=b(),[p,u]=n.useState(v.src);n.useEffect(()=>{u(r==="dark"?v.src:T.src)},[r]);const{userLogin:d}=b(),[x,f]=n.useState(!1);return n.useEffect(()=>{(async()=>{if(d.id===void 0)return;const a=await Z(d.id);a.data&&a.data[0]?.id&&f(!0)})()},[]),e.jsxs("div",{style:{backgroundColor:"white",backgroundImage:`url(${p})`},className:"flex flex-col w-full min-h-screen md:p-10 text-center bg-contain",children:[e.jsx(M,{id:"headerButtonsBlob",back:!1,refBtn:s}),e.jsxs("div",{className:"w-full flex flex-col md:flex-row items-center",children:[e.jsx("div",{className:"w-full md:w-[500px] flex flex-col z-10 pt-[1px]",children:e.jsx(z,{btnChat:!1,btnNotify:!1,maxw:!1})}),e.jsx("div",{className:"w-full hidden md:flex z-10 gap-4 px-4 md:px-40 pl-2 flex-col",children:e.jsx("div",{className:"w-full flex items-center justify-center mb-[-5px] mt-[-103px]",children:e.jsx("div",{className:"relative inline-block overflow-hidden",children:e.jsx("img",{src:B.src,width:150,alt:"Logo Kimik",className:"mb-[-50px]"})})})})]}),e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex flex-col xl:flex-row w-full justify-center gap-10 lg:px-[10%]",children:[!x&&e.jsx(ee,{}),x&&e.jsx("h1",{className:"text-2xl text-white pop-semi",children:"Ya tienes una pareja registrada!"})]})})]})},ge=()=>e.jsxs(G,{children:[e.jsx(K,{}),e.jsx(V,{children:e.jsx(J,{children:e.jsx(te,{})})})]});export{ge as default};
