import{g as f,u as I,j as e,C as i,o as $}from"./cookies.779I16bO.js";import{b as L}from"./fondo.pM3xDz3j.js";import{s as b,u as P,G as U,M}from"./ModalSettings.DFRVOOrG.js";import{H as E,C as T}from"./CardPerfilHorizontal.D0AFhb7i.js";import{r as n}from"./index.NEDEFKed.js";import{C as z}from"./index.D7_7wx8r.js";import{S as B,s as G,a as H,b as R,c as h}from"./swalert.DCpEXWBM.js";import"./users.1oC6gPmN.js";/* empty css                       */import"./notifies.dW6bY9BQ.js";/* empty css                       */import"./sweetalert2.all.Bo_iXOkr.js";import"./_commonjsHelpers.BosuxZz1.js";const Y=`${I}/api/couples`,q=async s=>{try{return await z.request({method:"POST",url:`${Y}/form`,headers:{Accept:"application/json","Content-Type":"multipart/form-data",Authorization:"Bearer "+f("AuthToken")},data:s})}catch(l){console.log(l)}},j=n.createContext(),O=({children:s})=>{const l={txtFullName:"",txtDia:"",txtMes:"",txtAnio:"",slcIdentify:"",txtFoto:"",acerca:"",user_id:""},[c,m]=n.useState(l),[d,x]=n.useState(null),[p,u]=n.useState(null);return e.jsx(j.Provider,{value:{form:c,setForm:m,file:d,setFile:x,previewUrl:p,setPreviewUrl:u},children:s})},J=()=>n.useContext(j),K=()=>{const{form:s,setForm:l,file:c,setFile:m,previewUrl:d,setPreviewUrl:x}=J(),p=n.useRef(null),u=()=>{p.current.click()},g=a=>{const t=a.target.files[0];if(t&&t.type.startsWith("image/")){m(t);const o=URL.createObjectURL(t);x(o)}else alert("Please select a valid image file"),m(null),x(null)},[N,v]=n.useState(""),[w,y]=n.useState(""),[C,F]=n.useState(""),k=a=>{const t=a.target.value;/^\d*$/.test(t)&&(t===""||parseInt(t)>=1&&parseInt(t)<=31)&&(v(t),l({...s,txtDia:t}))},A=a=>{const t=a.target.value;/^\d*$/.test(t)&&(t===""||parseInt(t)>=1&&parseInt(t)<=12)&&(y(t),l({...s,txtMes:t}))},S=a=>{const t=a.target.value;if(/^\d*$/.test(t)){F(t);const o=new Date().getFullYear(),r=o-70,_=o-18;t!==""&&(parseInt(t)<r||parseInt(t)>_)?l({...s,txtAnio:""}):l({...s,txtAnio:t})}},D=async()=>{if(console.log("form :"),console.log(s),!c){alert("Please select a file first");return}const a=new FormData;if(a.append("image",c),!s.txtFullName||!s.txtDia||!s.txtMes||!s.txtAnio||!s.slcIdentify||!d)return h("error","Error!","Debe diligenciar todos los campos para continuar");const t=JSON.parse(f("User"));let o;const r={nombre:s.txtFullName,nacimiento_dia:s.txtDia,nacimiento_mes:s.txtMes,nacimiento_ano:s.txtAnio,genero_identifica:s.slcIdentify,foto:d,acerca:"",user_id:t.id};console.log(r),a.append("id",r.id),a.append("nombre",r.nombre),a.append("nacimiento_dia",r.nacimiento_dia),a.append("nacimiento_mes",r.nacimiento_mes),a.append("nacimiento_ano",r.nacimiento_ano),a.append("genero_identifica",r.genero_identifica),a.append("foto",""),a.append("acerca",r.acerca),a.append("user_id",r.user_id),o=await q(a),console.log(o),o.status>=200&&o.status<=400?h("success","Exito!","Pareja registrada correctamente!"):(console.log(o),h("error","Error!","Ha ocurrido un error inesperado!"))};return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h2",{className:"text-left mb-4 text-xl pop-regular",children:"Añadir datos de pareja"}),e.jsxs("div",{className:"w-[500px] bg-[#D84066] rounded-[25px] p-3 border border-white",children:[e.jsxs("div",{className:"flex pt-2 pb-4 border-b border-white",children:[e.jsx("div",{className:"w-[55px] h-[55px] min-w-[55px] border border-black bg-black p-1 rounded-full ml-2 mr-4",children:e.jsx("img",{src:b.src,alt:"Logo"})}),e.jsxs("div",{className:"flex flex-col text-left w-full",children:[e.jsx("h3",{className:"text-white text-xl pop-regular",children:"Nombre"}),e.jsx("small",{className:"text-sm text-white",children:"Ubicacion"})]})]}),e.jsxs("div",{className:"my-4 flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"txtFullName",className:`${i.label}`,children:"Nombre completo"}),e.jsx("div",{className:"flex mb-2",children:e.jsx("input",{className:`${i.inputTwo}`,type:"text",name:"txtFullName",placeholder:"Ingresa tu nombre Completo",pattern:"[a-zA-Z]+",minLength:"5",maxLength:"260",value:s.txtFullName,onChange:a=>l({...s,txtFullName:a.target.value}),required:!0})}),e.jsx("label",{htmlFor:"txtDia",className:`${i.label}`,children:"Fecha de nacimiento"}),e.jsx("div",{className:"flex mb-2",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"special-select mr-2",children:e.jsx("input",{className:`${i.inputTwo}`,type:"text",name:"txtDia",placeholder:"Día",minLength:"1",maxLength:"2",min:"1",max:"31",value:N,onChange:k,required:!0})}),e.jsx("div",{className:"special-select mr-2",children:e.jsx("input",{className:`${i.inputTwo}`,type:"text",name:"txtMes",placeholder:"Mes",minLength:"1",maxLength:"2",min:"1",max:"12",value:w,onChange:A,required:!0})}),e.jsx("div",{className:"special-select",children:e.jsx("input",{className:`${i.inputTwo}`,type:"text",name:"txtAnio",placeholder:"Año",maxLength:"4",value:C,onChange:S,required:!0})})]})}),e.jsx("label",{htmlFor:"slcIdentify",className:`${i.label}`,children:"Genero"}),e.jsx("div",{className:"flex mb-2 z-40",children:e.jsx(B,{id:"slcIdentify",options:$,form:s,setForm:l})}),e.jsx("label",{className:`${i.label}`,children:"Foto de los ojos"}),e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsx("button",{onClick:u,title:"Subir Foto",type:"button",className:"flex bg-white w-full cursor-pointer md:w-2/4 border align-center items-center justify-center border-black rounded-[25px] md:mr-2 mb-4 md:mb-0",children:e.jsx("div",{className:"relative p-4",children:e.jsx("img",{className:"relative",id:"imgFotoOjos",src:d??G.src,width:245,height:143,alt:"Subir imagen"})})}),e.jsx("input",{ref:p,className:"hidden",type:"file",name:"inputFoto",accept:"image/*",onChange:g}),e.jsx("div",{className:"flex bg-white w-full md:w-2/4 flex-col justify-center border border-black rounded-[25px] md:ml-2",children:e.jsx("div",{className:"flex justify-center items-center h-[160px] overflow-hidden mb-2",children:e.jsx("img",{className:"w-[200px]",src:H.src,alt:"Demostracion de foto"})})})]}),e.jsx("div",{className:"flex mt-2",children:e.jsxs("button",{onClick:u,className:"bg-white border border-black w-full justify-between rounded-xl flex items-center px-4 h-[58px] mr-2",children:[e.jsxs("label",{className:"w-full text-black pop-bold",children:[d?"Cambiar":"Cargar"," Foto"]}),e.jsx("img",{src:R.src,className:"mr-2",width:30,alt:"Upload"})]})}),e.jsxs("div",{className:"flex justify-center mt-4",children:[e.jsx("button",{className:"bg-transparent cursor-pointer border border-black w-[160px] justify-center rounded-[25px] flex items-center px-4 py-2 mr-2",children:e.jsx("label",{className:" text-black pop-bold cursor-pointer",children:" Cancelar"})}),e.jsx("button",{onClick:D,className:"ml-4 bg-black cursor-pointer border border-black w-[160px] justify-center rounded-[25px] flex items-center px-4 py-2 mr-2",children:e.jsx("label",{className:"text-white pop-bold cursor-pointer",children:" Aceptar"})})]})]})]})]})},W=()=>{const{refHeaderButtonsNull:s}=P();return n.useEffect(()=>{const l=f("AuthToken"),c=f("User");l!=null&&c!=null||(window.location.href="/")},[]),e.jsxs("div",{style:{backgroundImage:`url(${L.src})`},className:"flex justify-center flex-col w-full min-h-screen p-10 text-center bg-contain",children:[e.jsx(E,{id:"headerButtonsBlob",back:!1,refBtn:s}),e.jsxs("div",{className:"w-full flex items-center",children:[e.jsx("div",{className:"w-[500px] flex flex-col z-10 pr-2 pt-[1px]",children:e.jsx(T,{btnChat:!1})}),e.jsx("div",{className:"w-full z-10 gap-4 px-40 pl-2 flex flex-col",children:e.jsx("div",{className:"w-full flex items-center justify-center mb-[-5px] mt-[-103px]",children:e.jsx("div",{className:"relative inline-block overflow-hidden",children:e.jsx("img",{src:b.src,width:150,alt:"Logo Kimik",className:"mb-[-50px]"})})})})]}),e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"flex flex-col xl:flex-row w-full justify-center gap-10 lg:px-[10%]",children:e.jsx(K,{})})})]})},ce=()=>e.jsxs(U,{children:[e.jsx(M,{}),e.jsx(O,{children:e.jsx(W,{})})]});export{ce as default};
